<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Game Development – Geschichte</title>

<style>
    body {
        font-family: system-ui, sans-serif;
        background: #eef1f5;
        margin: 0;
        color: #222;
    }

    header {
        background: #1f2933;
        color: white;
        padding: 30px;
        text-align: center;
    }

    main {
        max-width: 800px;
        margin: auto;
        padding: 40px 20px;
    }

    .card {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    }

    button {
        padding: 12px 25px;
        font-size: 16px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        background: #2563eb;
        color: white;
        margin: 10px 10px 10px 0;
    }

    button.secondary {
        background: #e5e7eb;
        color: #111;
    }

    .hidden {
        display: none;
    }

    input {
        width: 100%;
        padding: 12px;
        font-size: 16px;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
    }

    .result {
        margin-top: 10px;
        padding: 10px;
        border-radius: 8px;
        font-weight: bold;
    }

    .message {
        margin-top: 15px;
        font-weight: bold;
    }

    canvas {
        background: #111;
        border-radius: 10px;
        display: block;
        margin: 20px auto;
    }

    .score {
        text-align: center;
        margin-top: 10px;
        font-size: 18px;
    }
</style>
</head>

<body>

<header>
    <h1>Game Development</h1>
    <p>Geschichte, Anfänge und frühe Spiele</p>
</header>

<main>

<!-- HOME -->
<div id="home" class="card">
    <h2>Start</h2>

    <p>Freischaltung für interaktive Inhalte:</p>
    <input id="passwordInput" placeholder="Passwort eingeben">
    <button onclick="unlock()">Freischalten</button>
    <div id="passwordMsg" class="message"></div>

    <hr style="margin: 30px 0;">

    <button onclick="openQuiz()">Quiz</button>
    <button onclick="openGame()">Pong</button>
    <button class="secondary" onclick="showHandout()">Handout</button>
</div>

<!-- QUIZ -->
<div id="quiz" class="card hidden">
    <h2>Quiz</h2>

    <div>
        <p><strong>Wie heißt eines der ersten Videospiele?</strong></p>
        <input id="q1" placeholder="Antwort eingeben und Enter drücken">
        <div id="r1" class="result"></div>
    </div>

    <div style="margin-top: 25px;">
        <p><strong>Welche frühe Programmiersprache wurde oft genutzt?</strong></p>
        <input id="q2" placeholder="Antwort eingeben und Enter drücken">
        <div id="r2" class="result"></div>
    </div>

    <button class="secondary" onclick="goHome()">Zurück</button>
</div>

<!-- GAME -->
<div id="game" class="card hidden">
    <h2>Pong</h2>
    <p>Bewege den Schläger mit der Maus</p>

    <canvas id="pong" width="500" height="300"></canvas>

    <div class="score">
        Score: <span id="score">0</span> |
        Highscore: <span id="highscore">0</span>
    </div>

    <button onclick="startGame()">Neustart</button>
    <button class="secondary" onclick="goHome()">Zurück</button>
</div>

<!-- HANDOUT -->
<div id="handout" class="card hidden">
    <h2>Handout</h2>
    <p><em>Still under development.</em></p>
    <button class="secondary" onclick="goHome()">Zurück</button>
</div>

</main>

<script>
/* =====================
   FREISCHALTUNG
===================== */
const PASSWORD = "freischalten";
let unlocked = localStorage.getItem("unlocked") === "true";

function unlock() {
    const input = document.getElementById("passwordInput").value.trim();
    const msg = document.getElementById("passwordMsg");

    if (input === PASSWORD) {
        unlocked = true;
        localStorage.setItem("unlocked", "true");
        msg.textContent = "Freigeschaltet";
        msg.style.color = "green";
    } else {
        msg.textContent = "Falsches Passwort";
        msg.style.color = "red";
    }
}

/* =====================
   NAVIGATION
===================== */
const home = document.getElementById("home");
const quiz = document.getElementById("quiz");
const game = document.getElementById("game");
const handout = document.getElementById("handout");

function openQuiz() {
    if (!unlocked) {
        showMsg("Noch nicht freigeschaltet");
        return;
    }
    home.classList.add("hidden");
    quiz.classList.remove("hidden");
}

function openGame() {
    if (!unlocked) {
        showMsg("Noch nicht freigeschaltet");
        return;
    }
    home.classList.add("hidden");
    game.classList.remove("hidden");
    startGame();
}

function showHandout() {
    home.classList.add("hidden");
    handout.classList.remove("hidden");
}

function goHome() {
    quiz.classList.add("hidden");
    game.classList.add("hidden");
    handout.classList.add("hidden");
    home.classList.remove("hidden");
    running = false;
}

function showMsg(text) {
    const msg = document.getElementById("passwordMsg");
    msg.textContent = text;
    msg.style.color = "red";
}

/* =====================
   QUIZ
===================== */
const answers = {
    q1: ["spacewar", "tennis for two"],
    q2: ["assembler", "assembly", "c"]
};

function checkAnswer(q, r) {
    const value = document.getElementById(q).value.toLowerCase().trim();
    const result = document.getElementById(r);

    if (answers[q].includes(value)) {
        result.textContent = "Richtig";
        result.style.background = "#c7f9cc";
    } else {
        result.textContent = "Falsch";
        result.style.background = "#f8d7da";
    }
}

q1.addEventListener("keydown", e => e.key === "Enter" && checkAnswer("q1", "r1"));
q2.addEventListener("keydown", e => e.key === "Enter" && checkAnswer("q2", "r2"));

/* =====================
   PONG
===================== */
const canvas = document.getElementById("pong");
const ctx = canvas.getContext("2d");

const paddle = { x: 15, y: 115, width: 10, height: 70 };
const ball = { x: 250, y: 150, r: 6, vx: 3, vy: 3 };

let score = 0;
let highscore = localStorage.getItem("highscore") || 0;
let running = false;

document.getElementById("highscore").textContent = highscore;

canvas.addEventListener("mousemove", e => {
    const rect = canvas.getBoundingClientRect();
    paddle.y = e.clientY - rect.top - paddle.height / 2;
    paddle.y = Math.max(0, Math.min(canvas.height - paddle.height, paddle.y));
});

function startGame() {
    ball.x = 250;
    ball.y = 150;
    ball.vx = 3;
    ball.vy = 3;
    score = 0;
    running = true;
    requestAnimationFrame(loop);
}

function loop() {
    if (!running) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "white";
    ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);

    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
    ctx.fill();

    ball.x += ball.vx;
    ball.y += ball.vy;

    if (ball.y - ball.r <= 0 || ball.y + ball.r >= canvas.height) ball.vy *= -1;

    if (
        ball.vx < 0 &&
        ball.x - ball.r <= paddle.x + paddle.width &&
        ball.y >= paddle.y &&
        ball.y <= paddle.y + paddle.height
    ) {
        ball.vx *= -1;
        score++;
    }

    if (ball.x - ball.r < 0) {
        running = false;
        if (score > highscore) {
            highscore = score;
            localStorage.setItem("highscore", highscore);
        }
    }

    document.getElementById("score").textContent = score;
    document.getElementById("highscore").textContent = highscore;

    requestAnimationFrame(loop);
}
</script>

</body>
</html>
